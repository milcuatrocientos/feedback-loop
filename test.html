<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <title>RaphaÃ«l test</title>
    <script src="raphael-min.js"></script>
    <script>
      function trail() {
        for (var i=1; i<items; i++) {
          paper.circle(canvasWidth/2, canvasHeight/2, factor*Math.min(canvasWidth, canvasHeight)/2)
               .attr('stroke-width', 2)
               .animateWith(circle, animationcb, animation.delay(duration/items*i));
        };
      };

      window.onload = function () {
        canvasWidth = 800, canvasHeight = 500, factor = 0.8, duration = 2e3, items = 5;

        paper = Raphael("canvas", canvasWidth, canvasHeight);
        paper.circle(canvasWidth/2, canvasHeight/2, factor*Math.min(canvasWidth, canvasHeight)/2)
             .attr('stroke-width', 2);

        animation = Raphael.animation({x: canvasWidth/2, y: canvasHeight/2, r: 0, 'stroke-width': 1}, duration, 'ease-in');
        animationcb = Raphael.animation({x: canvasWidth/2, y: canvasHeight/2, r: 0, 'stroke-width': 1}, duration, 'ease-in', trail);
        circle = paper.circle(canvasWidth/2, canvasHeight/2, factor*Math.min(canvasWidth, canvasHeight)/2)
                      .attr('stroke-width', 2)
                      .animate(animationcb.repeat(Infinity));
        trail();
      };
    </script>
  </head>
  <body>
    <div id="canvas" style="width: 800px; margin: auto;"></div>
  </body>
</html>
